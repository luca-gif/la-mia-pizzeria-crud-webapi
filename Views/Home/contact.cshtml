@{
    Layout = "_LayoutBasic";
    }

<form onsubmit="sendMessage(event)" class="w-50 m-auto">

    <div class="form-group">
        <label for="name">Nome</label>
        <input type="text" class="form-control" id="name" placeholder="Inserisci il nome">
    </div>

    <div class="form-group">
        <label for="email">Email address</label>
        <input type="text" class="form-control" id="email" placeholder="Inserisci la tua email">
    </div>

    <div class="form-group">
        <label for="title">Titolo</label>
        <input type="text" class="form-control" id="title" placeholder="Inserisci il titolo">
    </div>

    <div class="form-group">
        <label class="form-check-label" for="text">Descrizione</label>
        <textarea class="form-control" rows="6" id="text" placeholder="Scrivi qualcosa..."></textarea>
    </div>

    <button type="submit" class="btn btn-primary my-2">Invia</button>
</form>


<script>
    
    function sendMessage(e){

        const url = "/api/messages/sendMessage";

        const nome = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const titolo = document.getElementById("title").value;
        const contenuto = document.getElementById("text").value;

        e.preventDefault();

        axios.post(url, {

            name: nome,
            email: email,
            title: titolo,
            description: contenuto

        })
            .then((r) => {

                alert('Messaggio inviato!')
                console.log(r)
            })
            .catch((e) => {
                console.log(e.message)

                alert('Qualcosa è andato storto, riprova!')
            })
    }

</script>