@{
    Layout = "_LayoutBasic";
    }

<form onsubmit="sendMessage(event)" class="w-50 m-auto">

    <div class="form-group">
        <label for="name">Nome</label>
        <input type="text" class="form-control shadow-none" id="name" placeholder="Inserisci il nome">
    </div>

    <div class="form-group">
        <label for="email">Email address</label>
        <input type="text" class="form-control shadow-none" id="email" placeholder="Inserisci la tua email">
    </div>

    <div class="form-group">
        <label for="title">Titolo</label>
        <input type="text" class="form-control shadow-none" id="title" placeholder="Inserisci il titolo">
    </div>

    <div class="form-group">
        <label class="form-check-label" for="text">Descrizione</label>
        <textarea class="form-control shadow-none" rows="6" id="text" placeholder="Scrivi qualcosa..."></textarea>
    </div>

    <button type="submit" class="btn btn-secondary my-2">Invia</button>
</form>




<script>
   
    function sendMessage(e){

        const url = "/api/messages/sendMessage";

        let nome = $("#name")[0].value;
        let email = $("#email")[0].value;
        let titolo = $("#title")[0].value;
        let contenuto = $("#text")[0].value;
        
        e.preventDefault();

        axios.post(url, {

            name: nome,
            email: email,
            title: titolo,
            description: contenuto

        })
            .then((r) => {

                reset();

                alert('Messaggio inviato!')

            })
            .catch((e) => {
                console.log(e.message)

                alert('Qualcosa è andato storto, riprova!')
            })
        }

        // Funzioni
    
    function reset(){

        $("#name")[0].value = "";
        $("#email")[0].value = "";
        $("#title")[0].value = "";
        $("#text")[0].value = "";
    }


</script>